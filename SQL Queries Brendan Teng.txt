SQL Queries Brendan Teng Modified for time complexity fixes



CREATE DEFINER=`henry_VPN`@`10.8.0.%` PROCEDURE `GetAdminRoleByID`(IN roleId INT)
BEGIN
    SELECT id, name, permissions
    FROM adminroles
    WHERE id = roleId;
END

How to use it:
EXEC GetAdminRoleByID @RoleId = 5;


CREATE DEFINER=`henry_VPN`@`10.8.0.%` PROCEDURE `GetChannelByName`(IN channelName VARCHAR(100))
BEGIN
    SELECT Channel_Id, Market_Id, Channel_Name, Host_Name, IP, Affiliate, Virtual, Call_Sign
    FROM channels
    WHERE Channel_Name = channelName;
END
How to use it:
CALL GetChannelByName('KCNC-TV');

CREATE DEFINER=`henry_VPN`@`10.8.0.%` PROCEDURE `GetEmailRequestByID`(IN requestId INT)
BEGIN
    SELECT id, organization, name, state
    FROM Email_Request
    WHERE id = requestId;
END
How to use it:
CALL GetEmailRequestByID(3);

CREATE DEFINER=`henry_VPN`@`10.8.0.%` PROCEDURE `GetEmailRequestsByState`(IN stateName VARCHAR(100))
BEGIN
    SELECT id, organization, name, state
    FROM Email_Request
    WHERE state = stateName
    ORDER BY organization ASC;
END;



CREATE DEFINER=`henry_VPN`@`10.8.0.%` PROCEDURE `GetEmailRequestsByOrganization`(IN orgName VARCHAR(255))
BEGIN
    SELECT id, organization, name, state
    FROM Email_Request
    WHERE organization = orgName;
END;



CREATE PROCEDURE SearchEmailRequestsByName(IN partialName VARCHAR(100))
BEGIN
    SELECT id, organization, name, state
    FROM Email_Request
    WHERE MATCH(name) AGAINST (partialName IN NATURAL LANGUAGE MODE);
END



CREATE DEFINER=`henry_VPN`@`10.8.0.%` PROCEDURE `GetAllUniqueStates`()
BEGIN
    SELECT DISTINCT state
    FROM Email_Request
    ORDER BY state;
END;


CREATE DEFINER=`henry_VPN`@`10.8.0.%` PROCEDURE `GetRecentEmailRequests`(IN limitCount INT)
BEGIN
    SELECT id, organization, name, state
    FROM Email_Request
    ORDER BY created_at DESC
    LIMIT limitCount;
END;



Newly implemented queries for relevance search


CREATE DEFINER=`henry_VPN`@`10.8.0.%`
PROCEDURE `SearchAdminRolesByKeyword`(IN keyword VARCHAR(255))
BEGIN
    SELECT 
        id,
        name,
        permissions,
        MATCH(name, permissions) AGAINST (keyword IN NATURAL LANGUAGE MODE) AS relevance_score
    FROM adminroles
    WHERE MATCH(name, permissions) AGAINST (keyword IN NATURAL LANGUAGE MODE)
    ORDER BY relevance_score DESC;
END;


